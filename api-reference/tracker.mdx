---
title: 'Tracker API'
description: 'Complete API reference for HumanBehaviorTracker'
---

# HumanBehaviorTracker API

The main tracker class for recording user sessions and events.

## Initialization

### `HumanBehaviorTracker.init(apiKey, options?)`

Static method to initialize the tracker with global persistence.

```typescript
static init(
  apiKey: string, 
  options?: {
    ingestionUrl?: string;
    logLevel?: 'none' | 'error' | 'warn' | 'info' | 'debug';
    redactFields?: string[];
  }
): HumanBehaviorTracker
```

**Parameters:**
- `apiKey` (string): Your HumanBehavior API key
- `options` (object, optional): Configuration options
  - `ingestionUrl` (string, optional): Custom ingestion server URL
  - `logLevel` (string, optional): Logging level
  - `redactFields` (string[], optional): CSS selectors for fields to redact

**Returns:** `HumanBehaviorTracker` instance

**Example:**
```javascript
const tracker = HumanBehaviorTracker.init('your-api-key', {
  ingestionUrl: 'http://localhost:3000',
  logLevel: 'debug',
  redactFields: ['input[type="password"]', '#email']
});
```

### `new HumanBehaviorTracker(apiKey, ingestionUrl?)`

Constructor method (legacy, still supported).

```typescript
constructor(
  apiKey: string, 
  ingestionUrl?: string
)
```

**Parameters:**
- `apiKey` (string): Your HumanBehavior API key
- `ingestionUrl` (string, optional): Custom ingestion server URL

**Example:**
```javascript
const tracker = new HumanBehaviorTracker('your-api-key', 'http://localhost:3000');
await tracker.start(); // Must call start() manually
```

## Core Methods

### `start()`

Start recording user sessions and events.

```typescript
async start(): Promise<void>
```

**Example:**
```javascript
await tracker.start();
```

### `stop()`

Stop recording and cleanup resources.

```typescript
async stop(): Promise<void>
```

**Example:**
```javascript
await tracker.stop();
```

### `addEvent(event)`

Add a custom event to the recording queue.

```typescript
async addEvent(event: any): Promise<void>
```

**Parameters:**
- `event` (any): Event object to record

**Example:**
```javascript
await tracker.addEvent({
  type: 'custom',
  data: { action: 'button_click' }
});
```

## User Management

### `addUserInfo(userProperties)`

Add user information for identification.

```typescript
async addUserInfo(userProperties: Record<string, any>): Promise<void>
```

**Parameters:**
- `userProperties` (object): User properties (email, name, etc.)

**Example:**
```javascript
await tracker.addUserInfo({
  email: 'user@example.com',
  name: 'John Doe',
  userId: '12345'
});
```

### `auth(authFields)`

Authenticate user using existing user data.

```typescript
async auth(authFields: string[]): Promise<void>
```

**Parameters:**
- `authFields` (string[]): Array of field names to check for existing users

**Example:**
```javascript
await tracker.auth(['email', 'phoneNumber']);
```

## Event Tracking

### `trackPageView(url?)`

Track a page view event.

```typescript
async trackPageView(url?: string): Promise<void>
```

**Parameters:**
- `url` (string, optional): URL to track (defaults to current URL)

**Example:**
```javascript
await tracker.trackPageView();
await tracker.trackPageView('/checkout');
```

### `trackNavigationEvent(type, fromUrl, toUrl)`

Track navigation between pages.

```typescript
async trackNavigationEvent(
  type: string, 
  fromUrl: string, 
  toUrl: string
): Promise<void>
```

**Parameters:**
- `type` (string): Navigation type ('push', 'pop', 'replace', etc.)
- `fromUrl` (string): Source URL
- `toUrl` (string): Destination URL

**Example:**
```javascript
await tracker.trackNavigationEvent('push', '/home', '/products');
```

### `customEvent(eventName, properties?)`

Track a custom event with properties.

```typescript
async customEvent(
  eventName: string, 
  properties?: Record<string, any>
): Promise<void>
```

**Parameters:**
- `eventName` (string): Name of the event
- `properties` (object, optional): Event properties

**Example:**
```javascript
await tracker.customEvent('purchase_completed', {
  productId: '123',
  amount: 99.99,
  currency: 'USD'
});
```

## Console Tracking

### `enableConsoleTracking()`

Enable tracking of console logs, warnings, and errors.

```typescript
enableConsoleTracking(): void
```

**Example:**
```javascript
tracker.enableConsoleTracking();
```

### `disableConsoleTracking()`

Disable console tracking.

```typescript
disableConsoleTracking(): void
```

**Example:**
```javascript
tracker.disableConsoleTracking();
```

## Data Redaction

### `redact(options?)`

Enable data redaction for sensitive fields.

```typescript
async redact(options?: RedactionOptions): Promise<void>
```

**Parameters:**
- `options` (RedactionOptions, optional): Redaction configuration

**Example:**
```javascript
await tracker.redact({
  maskTextInputs: true,
  maskAllText: false
});
```

### `setRedactedFields(fields)`

Set specific fields to be redacted.

```typescript
setRedactedFields(fields: string[]): void
```

**Parameters:**
- `fields` (string[]): Array of CSS selectors for fields to redact

**Example:**
```javascript
tracker.setRedactedFields([
  'input[type="password"]',
  '#email-field',
  '.sensitive-data'
]);
```

### `isRedactionActive()`

Check if redaction is currently active.

```typescript
isRedactionActive(): boolean
```

**Returns:** `boolean`

**Example:**
```javascript
if (tracker.isRedactionActive()) {
  console.log('Redaction is enabled');
}
```

### `getRedactedFields()`

Get the currently selected fields for redaction.

```typescript
getRedactedFields(): string[]
```

**Returns:** `string[]`

**Example:**
```javascript
const fields = tracker.getRedactedFields();
console.log('Redacted fields:', fields);
```

## Debugging & Logging

### `viewLogs()`

View stored logs in the console.

```typescript
viewLogs(): void
```

**Example:**
```javascript
tracker.viewLogs();
```

### `testConnection()`

Test if the tracker can reach the ingestion server.

```typescript
async testConnection(): Promise<{ success: boolean; error?: string }>
```

**Returns:** `Promise<{ success: boolean; error?: string }>`

**Example:**
```javascript
const status = await tracker.testConnection();
if (status.success) {
  console.log('Connection successful');
} else {
  console.log('Connection failed:', status.error);
}
```

### `getConnectionStatus()`

Get connection status and recommendations.

```typescript
getConnectionStatus(): { blocked: boolean; recommendations: string[] }
```

**Returns:** `{ blocked: boolean; recommendations: string[] }`

**Example:**
```javascript
const status = tracker.getConnectionStatus();
console.log('Blocked:', status.blocked);
console.log('Recommendations:', status.recommendations);
```

### `getSessionId()`

Get the current session ID.

```typescript
getSessionId(): string
```

**Returns:** `string`

**Example:**
```javascript
const sessionId = tracker.getSessionId();
console.log('Current session:', sessionId);
```

### `getCurrentUrl()`

Get the current URL being tracked.

```typescript
getCurrentUrl(): string
```

**Returns:** `string`

**Example:**
```javascript
const currentUrl = tracker.getCurrentUrl();
console.log('Current URL:', currentUrl);
```

## Static Methods

### `HumanBehaviorTracker.configureLogging(config)`

Configure logging behavior.

```typescript
static configureLogging(config: {
  level?: 'none' | 'error' | 'warn' | 'info' | 'debug';
  enableConsole?: boolean;
  enableStorage?: boolean;
}): void
```

**Parameters:**
- `config` (object): Logging configuration
  - `level` (string, optional): Log level
  - `enableConsole` (boolean, optional): Enable console logging
  - `enableStorage` (boolean, optional): Enable storage logging

**Example:**
```javascript
HumanBehaviorTracker.configureLogging({
  level: 'debug',
  enableConsole: true,
  enableStorage: true
});
```

### `HumanBehaviorTracker.logToStorage(message)`

Log a message to storage.

```typescript
static logToStorage(message: string): void
```

**Parameters:**
- `message` (string): Message to log

**Example:**
```javascript
HumanBehaviorTracker.logToStorage('User logged in');
```

## Properties

### `navigationTrackingEnabled`

Whether navigation tracking is enabled.

```typescript
navigationTrackingEnabled: boolean
```

### `initializationPromise`

Promise that resolves when initialization is complete.

```typescript
initializationPromise: Promise<void> | null
```

## Events

The tracker automatically captures these events:

- **Mouse movements** and clicks
- **Keyboard input** and form interactions
- **Scroll events** and viewport changes
- **Navigation events** (SPA routing, browser navigation)
- **Console logs**, warnings, and errors
- **Custom events** via `customEvent()` method

## Error Handling

The tracker includes robust error handling:

- **Connection failures** are handled gracefully
- **Ad blocker detection** with fallback mechanisms
- **Session expiration** with automatic retry
- **Network issues** with event queuing and retry

## Session Persistence

Sessions automatically persist for 30 minutes of inactivity:

- **localStorage** is used for session storage
- **Cookies** are used for user identification
- **Cross-page continuity** is maintained within the same domain 