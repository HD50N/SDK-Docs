---
title: 'Tracker API'
description: 'Complete API reference for HumanBehaviorTracker'
---

# HumanBehaviorTracker API

The main tracker class for recording user sessions and events.

## Initialization

### `HumanBehaviorTracker.init(apiKey, options?)`

Static method to initialize the tracker with global persistence.

```typescript
static init(
  apiKey: string, 
  options?: {
    redactFields?: string[];
  }
): HumanBehaviorTracker
```

**Parameters:**
- `apiKey` (string): Your HumanBehavior API key
- `options` (object, optional): Configuration options
  - `redactFields` (string[], optional): CSS selectors for fields to redact

**Returns:** `HumanBehaviorTracker` instance

**Example:**
```javascript
const tracker = HumanBehaviorTracker.init('your-api-key', {
  redactFields: ['input[type="password"]', '#email']
});
```

### `new HumanBehaviorTracker(apiKey)`

Constructor method (legacy, still supported).

```typescript
constructor(
  apiKey: string
)
```

**Parameters:**
- `apiKey` (string): Your HumanBehavior API key

**Example:**
```javascript
const tracker = new HumanBehaviorTracker('your-api-key');
await tracker.start(); // Must call start() manually
```

## Core Methods

### `start()`

Start recording user sessions and events.

```typescript
async start(): Promise<void>
```

**Example:**
```javascript
await tracker.start();
```

### `stop()`

Stop recording and cleanup resources.

```typescript
async stop(): Promise<void>
```

**Example:**
```javascript
await tracker.stop();
```

### `addEvent(event)`

Add a custom event to the recording queue.

```typescript
async addEvent(event: any): Promise<void>
```

**Parameters:**
- `event` (any): Event object to record

**Example:**
```javascript
await tracker.addEvent({
  type: 'custom',
  data: { action: 'button_click' }
});
```

## User Management

### `addUserInfo(userProperties)`

Add user information for identification.

```typescript
async addUserInfo(userProperties: Record<string, any>): Promise<void>
```

**Parameters:**
- `userProperties` (object): User properties (email, name, etc.)

**Example:**
```javascript
await tracker.addUserInfo({
  email: 'user@example.com',
  name: 'John Doe',
  userId: '12345'
});
```

### `auth(authFields)`

Authenticate user using existing user data.

```typescript
async auth(authFields: string[]): Promise<void>
```

**Parameters:**
- `authFields` (string[]): Array of field names to check for existing users

**Example:**
```javascript
await tracker.auth(['email', 'phoneNumber']);
```







## Data Redaction

### `redact(options?)`

Enable data redaction for sensitive fields.

```typescript
async redact(options?: RedactionOptions): Promise<void>
```

**Parameters:**
- `options` (RedactionOptions, optional): Redaction configuration

**Example:**
```javascript
await tracker.redact({
  maskTextInputs: true,
  maskAllText: false
});
```

### `setRedactedFields(fields)`

Set specific fields to be redacted.

```typescript
setRedactedFields(fields: string[]): void
```

**Parameters:**
- `fields` (string[]): Array of CSS selectors for fields to redact

**Example:**
```javascript
tracker.setRedactedFields([
  'input[type="password"]',
  '#email-field',
  '.sensitive-data'
]);
```

### `isRedactionActive()`

Check if redaction is currently active.

```typescript
isRedactionActive(): boolean
```

**Returns:** `boolean`

**Example:**
```javascript
if (tracker.isRedactionActive()) {
  console.log('Redaction is enabled');
}
```

### `getRedactedFields()`

Get the currently selected fields for redaction.

```typescript
getRedactedFields(): string[]
```

**Returns:** `string[]`

**Example:**
```javascript
const fields = tracker.getRedactedFields();
console.log('Redacted fields:', fields);
```

## User Information

### `getUserInfo()`

Get comprehensive user information.

```typescript
getUserInfo(): {
  endUserId: string | null;
  sessionId: string;
  isPreexistingUser: boolean;
  initialized: boolean;
}
```

**Returns:** User information object

**Example:**
```javascript
const userInfo = tracker.getUserInfo();
console.log('User ID:', userInfo.endUserId);
console.log('Session ID:', userInfo.sessionId);
console.log('Is existing user:', userInfo.isPreexistingUser);
```

### `getSessionId()`

Get the current session ID.

```typescript
getSessionId(): string
```

**Returns:** `string`

**Example:**
```javascript
const sessionId = tracker.getSessionId();
console.log('Current session:', sessionId);
```

### `getCurrentUrl()`

Get the current URL being tracked.

```typescript
getCurrentUrl(): string
```

**Returns:** `string`

**Example:**
```javascript
const currentUrl = tracker.getCurrentUrl();
console.log('Current URL:', currentUrl);
```



## Static Methods

### `HumanBehaviorTracker.init(apiKey, options?)`

Static method to initialize the tracker with global persistence.

```typescript
static init(
  apiKey: string, 
  options?: {
    redactFields?: string[];
  }
): HumanBehaviorTracker
```

**Parameters:**
- `apiKey` (string): Your HumanBehavior API key
- `options` (object, optional): Configuration options
  - `redactFields` (string[], optional): CSS selectors for fields to redact

**Returns:** `HumanBehaviorTracker` instance

**Example:**
```javascript
const tracker = HumanBehaviorTracker.init('your-api-key', {
  redactFields: ['input[type="password"]', '#email']
});
```

## Properties

### `navigationTrackingEnabled`

Whether navigation tracking is enabled.

```typescript
navigationTrackingEnabled: boolean
```

### `initializationPromise`

Promise that resolves when initialization is complete.

```typescript
initializationPromise: Promise<void> | null
```

## Events

The tracker automatically captures these events:

- **Mouse movements** and clicks
- **Keyboard input** and form interactions
- **Scroll events** and viewport changes

## Error Handling

The tracker includes robust error handling:

- **Connection failures** are handled gracefully with automatic retry
- **Ad blocker detection** with fallback mechanisms
- **Session expiration** with automatic retry and event queuing
- **Network issues** with event queuing and retry
- **Graceful degradation** when services are unavailable

## Session Persistence

Sessions automatically persist for 30 minutes of inactivity:

- **localStorage** is used for session storage
- **Cookies** are used for user identification
- **Cross-page continuity** is maintained within the same domain
- **Automatic session restoration** when returning within 30 minutes 