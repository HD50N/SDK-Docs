---
title: 'Session Tracking'
description: 'Learn how HumanBehavior SDK automatically tracks user sessions'
---

HumanBehavior SDK automatically captures comprehensive user sessions with minimal setup required.

## Automatic Session Recording

The SDK automatically starts recording when initialized:

```javascript
import { HumanBehaviorTracker } from 'humanbehavior-js';

// Initialize and start recording automatically
const tracker = HumanBehaviorTracker.init('your-api-key');
```

<Note>
  No manual `start()` call is required with the `init()` method. The SDK automatically begins recording user interactions.
</Note>

## What Gets Recorded

The SDK automatically captures these user interactions:

### Mouse Interactions
- **Mouse movements** and hover states
- **Click events** on buttons, links, and other elements
- **Right-click** and context menu interactions
- **Drag and drop** operations

### Keyboard Input
- **Text input** in form fields
- **Key combinations** and shortcuts
- **Copy/paste** operations
- **Form submissions**



### Console Activity
- **Console logs** and debug messages
- **Warnings** and error messages
- **Performance** and timing information

### Viewport Changes
- **Scroll events** and scroll position
- **Window resizing** and orientation changes
- **Element visibility** and focus changes

## Session Persistence

Sessions automatically persist across page reloads and navigation:

### 30-Minute Session Window
```javascript
// Session continues across:
// - Page refreshes within 30 minutes
// - Tab switching and reopening
// - Short periods of inactivity
// - SPA navigation

// New session created after:
// - 30+ minutes of inactivity
// - Manual session reset
// - Browser restart
```



## Session Management

### Session ID Generation
```javascript
// Each session gets a unique ID
const sessionId = tracker.getSessionId();
console.log('Current session:', sessionId);
// Output: "1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed"
```

### Session Storage
```javascript
// Sessions are stored in localStorage
// Check if session persistence is available
if (typeof localStorage !== 'undefined') {
  console.log('Session persistence enabled');
} else {
  console.log('Session persistence disabled');
}
```

## Manual Session Control

### Start Recording
```javascript
// Start recording (if not using init())
await tracker.start();
```

### Stop Recording
```javascript
// Stop recording but keep session alive
await tracker.stop();
```

### Check Recording Status
```javascript
// Check if recording is active
if (tracker.initializationPromise) {
  console.log('Tracker is initialized and recording');
}
```



## Console Tracking

### Enable Console Tracking
```javascript
// Console tracking is enabled by default
// You can disable it if needed
tracker.disableConsoleTracking();
```

### Custom Console Events
```javascript
// Console events are automatically captured:
console.log('User action completed');
console.warn('Form validation failed');
console.error('API request failed');
```

## Session Data Structure

Each session includes:

```javascript
{
  sessionId: "unique-session-id",
  startTime: "2024-01-15T10:30:00Z",
  endTime: "2024-01-15T10:45:00Z",
  events: [
    {
      type: "dom",
      data: { /* DOM interaction data */ },
      timestamp: 1705312200000
    },
    {
      type: "navigation",
      data: { 
        fromUrl: "/home",
        toUrl: "/products",
        type: "push"
      },
      timestamp: 1705312250000
    },
    {
      type: "console",
      data: {
        level: "log",
        message: "User clicked submit button"
      },
      timestamp: 1705312300000
    }
  ],
  userInfo: {
    endUserId: "user-123",
    properties: {
      email: "user@example.com",
      name: "John Doe"
    }
  }
}
```

## Performance Optimization

### Event Batching
```javascript
// Events are automatically batched and sent every 5 seconds
// This reduces network requests and improves performance
```

### Memory Management
```javascript
// Events are cleared after successful transmission
// Session data is limited to prevent memory leaks
// Automatic cleanup of old data
```

## Privacy and Security

### Data Redaction
```javascript
// Redact sensitive information
tracker.setRedactedFields([
  'input[type="password"]',
  '#email-field',
  '.sensitive-data'
]);
```

### Consent Management
```javascript
// Always get user consent before recording
if (userConsent) {
  const tracker = HumanBehaviorTracker.init('your-api-key');
} else {
  console.log('Session recording disabled - no consent');
}
```

## Troubleshooting

### Session Not Persisting
```javascript
// Check localStorage availability
if (typeof localStorage === 'undefined') {
  console.error('localStorage not available');
}

// Check session ID
const sessionId = tracker.getSessionId();
console.log('Current session:', sessionId);
```

### Events Not Recording
```javascript
// Check initialization status
if (tracker.initializationPromise) {
  await tracker.initializationPromise;
}

// Test connection
const status = await tracker.testConnection();
if (!status.success) {
  console.error('Connection failed:', status.error);
}
```

### Performance Issues
```javascript
// Check connection status
const connectionInfo = tracker.getConnectionStatus();
if (connectionInfo.blocked) {
  console.error('Connection blocked by ad blocker');
}
```

## Best Practices

### 1. Initialize Early
```javascript
// Initialize as early as possible in your app
document.addEventListener('DOMContentLoaded', () => {
  const tracker = HumanBehaviorTracker.init('your-api-key');
});
```

### 2. Handle Errors Gracefully
```javascript
try {
  const tracker = HumanBehaviorTracker.init('your-api-key');
} catch (error) {
  console.error('Failed to initialize tracker:', error);
  // Continue without tracking
}
```

### 3. Respect User Privacy
```javascript
// Always get explicit consent
if (getUserConsent()) {
  const tracker = HumanBehaviorTracker.init('your-api-key', {
    redactFields: ['input[type="password"]']
  });
}
```

### 4. Monitor Performance
```javascript
// Monitor connection status
setInterval(() => {
  const status = tracker.getConnectionStatus();
  if (status.blocked) {
    console.warn('Connection issues detected');
  }
}, 60000); // Check every minute
```

## Health Monitoring

### Health Endpoints
The HumanBehavior ingestion server provides comprehensive health monitoring endpoints:

```bash
# Simple health check
curl https://your-ingestion-server.com/health/simple

# Comprehensive health check (recommended)
curl https://your-ingestion-server.com/health

# Root endpoint
curl https://your-ingestion-server.com/
```

### Health Check Response
The comprehensive health endpoint returns detailed system status:

```json
{
  "status": "healthy",
  "timestamp": "2025-07-12T04:02:15.804Z",
  "uptime": 26.511021606,
  "environment": "production",
  "version": "1.0.0",
  "services": {
    "redis": {
      "status": "connected",
      "latency": 0
    },
    "database": {
      "status": "connected"
    }
  },
  "system": {
    "memory": {
      "used": 303,
      "total": 949,
      "percentage": 32
    },
    "cpu": {
      "load": [0.15, 0.12, 0.05],
      "cores": 1
    }
  }
}
```

### Monitoring Integration
```javascript
// Test connection to ingestion server
const testConnection = async () => {
  try {
    const response = await fetch('https://your-ingestion-server.com/health');
    const health = await response.json();
    
    if (health.status === 'healthy') {
      console.log('Ingestion server is healthy');
    } else {
      console.warn('Ingestion server issues detected:', health);
    }
  } catch (error) {
    console.error('Failed to reach ingestion server:', error);
  }
};

// Monitor health periodically
setInterval(testConnection, 300000); // Check every 5 minutes
```

<Note>
  The SDK automatically handles most session management tasks. Focus on getting user consent and handling errors gracefully.
</Note> 